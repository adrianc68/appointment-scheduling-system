<section class="select-assistant">
  <div class="assistant-table-content p-all-md">
    <h2>Seleccionar asistente</h2>

    <table class="assistant-table">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Usuario</th>
          <th>Email</th>
          <th>Teléfono</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of assistants">
          <td>{{ data.name }}</td>
          <td>{{ data.username }}</td>
          <td>{{ data.email }}</td>
          <td>{{ data.phoneNumber }}</td>
          <td>
            <button class="" (click)="selectedAssistant = data">
              Seleccionar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>


<div class="register-container">
  <form class="" (ngSubmit)="onSubmit()">
    <div class="form-header">
      <h2>
        Seleccionar horarios
      </h2>
    </div>

    <div class="form-body">
      <div class="form-input">
        <label for="startDate">{{translate(translationCodes.TC_START_TIME_LABEL)}}</label>
        <input class="input" id="startDate" type="datetime-local" step="1" [(ngModel)]="startDate" name="startDate"
          required
          placeholder="{{translate(translationCodes.TC_AVAILABILITY_TIME_SLOT_START_TIME_PLACEHOLDER_LABEL)}}" />
        <app-error-validation-message-form [messages]="errorValidationMessage['startDate']" />
      </div>

      <div class="form-input">
        <label for="endDate">{{translate(translationCodes.TC_END_TIME_LABEL)}}</label>
        <input class="input" id="endDate" type="datetime-local" step="1" [(ngModel)]="endDate" name="endDate" required
          placeholder="{{translate(translationCodes.TC_AVAILABILITY_TIME_SLOT_END_TIME_PLACEHOLDER_LABEL)}}" />
        <app-error-validation-message-form [messages]="errorValidationMessage['endDate']" />
      </div>

      <!--<div class="form-input">-->
      <!--  <label for="assistantUuid">{{ translate(translationCodes.TC_ASSISTANT_IDENTIFIER_LABEL)}}</label>-->
      <!--  <input class="input" id="assistantUuid" type="text" [(ngModel)]="assistantUuid" name="assistantUuid" required-->
      <!--    placeholder={{translate(translationCodes.TC_AVAILABILITY_TIME_SLOT_ASSISTANT_PLACEHOLDER_LABEL)}} />-->
      <!--  <app-error-validation-message-form [messages]="errorValidationMessage['assistantUuid']" />-->
      <!--</div>-->
      <span>
        asistente seleccionado: {{ selectedAssistant?.name}}
      </span>

      <div class="form-input">
        <h2>{{translate(translationCodes.TC_UNAVAILABLE_SLOT_LABEL)}}</h2>

        <div *ngFor="let slot of unavailableTimeSlots; let i = index">
          <div class="form-input">
            <label>{{translate(translationCodes.TC_START_TIME_LABEL)}}</label>
            <input class="input" type="datetime-local" step="1" [(ngModel)]="slot.startDate" name="startTime{{i}}"
              required />
          </div>

          <div class="form-input">
            <label>{{translate(translationCodes.TC_END_TIME_LABEL)}}</label>
            <input class="input" type="datetime-local" step="1" [(ngModel)]="slot.endDate" name="endTime{{i}}"
              required />
          </div>

          <button class="button" type="button" (click)="removeUnavailableTimeSlot(i)">
            {{translate(translationCodes.TC_DELETE_BUTTON_LABEL)}}
          </button>
        </div>

        <button class="button" type="button" (click)="addUnavailableTimeSlot()">
          {{translate(translationCodes.TC_ADD_BUTTON_LABEL)}}
        </button>
      </div>

    </div>

    <div class="form-footer">
      <br>
      <br>
      <app-button-task type="submit" [loadingState]="currentTaskState"
        [text]="translate(translationCodes.TC_REGISTER_BUTTON_LABEL)" />
      <span class="system-error">
        {{translate(systemMessage ?? translationCodes.TC_EMPTY)}}
      </span>
    </div>
  </form>
</div>
