<section class="app-management p-all-md">

  <button (click)="redirectToRegisterAppointment()">
    Registrar cita
  </button>

  <hr>
  <br><br><br>

  <div>
    <h2>Citas agendadas</h2>

    <!-- Selector de rango de fechas -->
    <label>Desde: </label>
    <input type="date" [ngModel]="startDate" (ngModelChange)="onDateRangeChange($event, 'start')" />
    <label>Hasta: </label>
    <input type="date" [ngModel]="endDate" (ngModelChange)="onDateRangeChange($event, 'end')" />

    <br><br>

    <table border="1" style="border-collapse: collapse; margin-bottom: 1rem; width: 100%;">
      <thead>
        <tr>
          <th>UUID Cita</th>
          <th>Status</th>
          <th>Created At</th>
          <th>Servicios</th>
          <th>Asistentes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of scheduledAppointments">
          <td>{{ appointment.uuid }}</td>
          <td>{{ appointment.status }}</td>
          <td>{{ appointment.createdAt | date:'short' }}</td>

          <!-- Servicios en la misma celda -->
          <td>
            <ul>
              <li *ngFor="let service of appointment.selectedServices">
                {{ service.name }} ({{ service.minutes }} min, {{ service.price | currency }})
                <br>
                {{ service.startDate | date:'shortTime' }} - {{ service.endDate | date:'shortTime' }}
              </li>
            </ul>
          </td>

          <!-- Asistentes en la misma celda -->
          <td>
            <ul>
              <li *ngFor="let assistant of appointment.assistants">
                {{ assistant.name }}
                <!--<br>{{ assistant.occupiedTimeRange.startDate | date:'shortTime' }} - {{ assistant.occupiedTimeRange.endDate | date:'shortTime' }}-->
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</section>

